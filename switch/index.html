<!doctype html>
<!-- LIFX CIRCADIAN LIGHT CONTROL INTERFACE
NOAH NORMAN // ANCILLARY MAGNET, LLC
n@hardwork.party -->
<html>
  <head>
    <title>SWITCH IT</title>
    <meta charset="utf-8" />
    <style type="text/css">
      body {
        text-align: center;
        min-width: 500px;
      }
    </style>
    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script>
 
      $(document).ready(function () {
        $("div#message_details").hide()
        $("#warning").show()
 
        var ws;
 
        var HOST = 'localhost';
        var PORT = 7777;
        var URI = '/ws';

        // create websocket instance
        ws = new WebSocket("ws://" + HOST + ":" + PORT + URI);

        // Handle incoming websocket message callback
        ws.onmessage = function(evt) {
          console.log("Message Received: " + evt.data)
          //alert("message received: " + evt.data);
          };

        // Close Websocket callback
        ws.onclose = function(evt) {
          console.log("***Connection Closed***");
          $("div#message_details").prepend('Connection closed from server -- restart the server');
          };

        // Open Websocket callback
        ws.onopen = function(evt) { 
          $("#warning").hide();
          $("div#message_details").show();
          console.log("***Connection Opened***");
        };

        // Send websocket message function
        $("#send").click(function(evt) {
            console.log("Sending Message: "+$("#message").val());
            ws.send($("#message").val());
        });
      });


    </script>
  </head>
 
  <body>
    <div id="warning">SERVER NOT FOUND. LAUNCH SERVER and RELOAD OR ELSE NO SWITCH.</div>
    <div id="message_details">
        </br></br>
        <label for="message">SWITCH:</label>
        <input type="text" id="message" value="off"/><br />
        <input type="submit" id="send" value="SEND" />
    </div>

  </body>
</html>